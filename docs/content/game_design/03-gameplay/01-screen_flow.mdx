import ZoomableDiagram from "@site/src/components/ZoomableDiagram";
import FullscreenGallery from "@site/src/components/FullscreenGallery";

# Fluxo de Telas

Esse documento descreve o fluxo de telas do jogo, indicando as transiÃ§Ãµes entre as cenas e as aÃ§Ãµes que podem ser realizadas em cada uma delas.

:::tip Dica
Clique nos links para navegar entre os diagramas.
:::

---

## MENUS

### Menu Principal

Primeira tela do jogo, onde o jogador pode iniciar ou carregar uma sessÃ£o de jogo, acessar as opÃ§Ãµes ou sair do jogo.

<ZoomableDiagram>

```mermaid
flowchart TD
    %% BotÃµes
    subgraph MainMenuButtons["BotÃµes"]
        NewGameButton("Novo Jogo")
        LoadGameButton("Carregar Jogo")
        OptionsButton("OpÃ§Ãµes")
        ExitButton("Sair")
    end

    %% DecisÃµes
    NewGameChoice{"â“ Iniciar novo jogo?"}
    ExitGameChoice{"â“ Sair do jogo?"}

    %% Caminhos
    GameplayTransition(("ğŸ”€ TransiÃ§Ã£o:<br><a href='#cidade'>Cidade</a>"))
    LoadGameWindow["ğŸªŸ Janela: <br><a href='#janela-carregar-jogo'>Carregar Jogo</a>"]
    OptionsWindow["ğŸªŸ Janela: <br><a href='#janela-opÃ§Ãµes'>OpÃ§Ãµes</a>"]
    ChoiceWindow["ğŸªŸ Janela: <br><a href='#janela-escolha'>Escolha</a>"]

    %% Fluxo
    NewGameButton --> NewGameChoice
    NewGameChoice -->|Sim| GameplayTransition
    NewGameChoice -->|NÃ£o| CancelNewGame["Cancelar"]

    LoadGameButton --> LoadGameWindow

    OptionsButton --> OptionsWindow

    ExitButton --> ChoiceWindow
    ChoiceWindow --> ExitGameChoice
    ExitGameChoice -->|Sim| Exit["Fecha o Jogo"]
    ExitGameChoice -->|NÃ£o| CancelExitGame["Cancelar"]
```

</ZoomableDiagram>

### Game Over

Tela exibida ao final de uma sessÃ£o de jogo, onde o jogador pode carregar um jogo salvo, voltar ao menu principal ou sair do jogo.

<ZoomableDiagram>

    ```mermaid
    flowchart TB
        %% BotÃµes
        subgraph GameOverButtons["BotÃµes"]
            LoadGameButton("Carregar Jogo")
            MainMenuButton("Menu Principal")
            ExitButton("Sair")
        end

        %% DecisÃµes
        MainMenuQuestion{"â“ Voltar ao Menu Principal?"}
        CloseGameQuestion{"â“ Sair do jogo?"}

        %% Caminhos
        MainMenuTransition(("ğŸ”€ TransiÃ§Ã£o:<br><a href='#menu-principal'>Menu Principal</a>"))

        LoadGameWindow["ğŸªŸ Janela: <br><a href='#janela-carregar-jogo'>Carregar Jogo</a>"]

        ExitChoiceWindow["ğŸªŸ Janela: <br><a href='#janela-escolha'>Escolha</a>"]

        %% Fluxo
        LoadGameButton --> LoadGameWindow

        MainMenuButton --> MainMenuQuestion
        MainMenuQuestion -->|Sim| MainMenuTransition
        MainMenuQuestion -->|NÃ£o| CancelMainMenu["Cancelar"]

        ExitButton --> ExitChoiceWindow
        ExitChoiceWindow --> CloseGameQuestion
        CloseGameQuestion -->|Sim| Exit["Fecha o Jogo"]
        CloseGameQuestion -->|NÃ£o| CancelCloseGame["Cancelar"]
    ```

</ZoomableDiagram>

---

## GAMEPLAY

ApÃ³s iniciar uma sessÃ£o (novo jogo ou carregar jogo salvo), o jogador Ã© levado para a cidade.

### Cidade

Funciona como um hub onde o jogador pode realizar diversas aÃ§Ãµes relacionadas ao gerenciamento dos personagens, equipamentos e, tambÃ©m, pode escolher uma dungeon para explorar.

Para mais detalhes, veja [sobre a cidade](../features/scenes/city).

<FullscreenGallery
  images={[
    {
      image: "/game_design/screen_flow/city/darkest_dungeon.png",
      title: "Darkest Dungeon",
    },
    {
      image: "/game_design/screen_flow/city/iratus.png",
      title: "Iratus: Lord of the Dead",
    },
  ]}
/>

<ZoomableDiagram>

    ```mermaid
    flowchart TB
        %% BotÃµes
        subgraph CityButtons["BotÃµes"]
            subgraph Buildings["Estruturas"]
                BuildingsList["Lista de Estruturas"]
            end

            TroopButton["Gerenciar Tropa"]
            InventoryButton["Gerenciar InventÃ¡rio"]
            ChooseDungeonButton["Escolher Dungeon"]

            subgraph CityOptions["BotÃµes Auxiliares"]
                SaveGameButton["Salvar Jogo"]
                OptionsButton["OpÃ§Ãµes"]
                MainMenuButton["Voltar ao Menu Principal"]
            end
        end

        %% DecisÃµes
        MainMenuQuestion{"â“ Voltar ao Menu Principal?"}

        %% Caminhos
        TroopWindow["ğŸªŸ Janela: <br><a href='#gerenciar-tropa'>Gerenciar Tropa</a>"]
        InventoryWindow["ğŸªŸ Janela: <br><a href='#janela-gerenciar-inventÃ¡rio'>Gerenciar InventÃ¡rio</a>"]
        ChooseDungeonWindow["ğŸªŸ Janela: <br><a href='#escolher-dungeon'>Escolher Dungeon</a>"]

        MainMenuTransition(("ğŸ”€ TransiÃ§Ã£o:<br><a href='#menu-principal'>Menu Principal</a>"))
        OptionsWindow("ğŸªŸ Janela: <br><a href='#janela-opÃ§Ãµes'>OpÃ§Ãµes</a>")

        %% Fluxo
        TroopButton --> TroopWindow
        InventoryButton --> InventoryWindow
        ChooseDungeonButton --> ChooseDungeonWindow

        MainMenuButton --> MainMenuQuestion
        MainMenuQuestion -->|Sim| MainMenuTransition
        MainMenuQuestion -->|NÃ£o| CancelMainMenu["Cancelar"]

        OptionsButton --> OptionsWindow

    ```
</ZoomableDiagram>

#### Gerenciar Tropa

#### Escolher Dungeon

### Dungeon

#### Mapa

<FullscreenGallery
  images={[
    {
      image: "/game_design/screen_flow/dungeon/slay_the_spire.png",
      title: "Slay the Spire",
    },
  ]}
/>

<ZoomableDiagram>

    ```mermaid
    flowchart TD
        %% BotÃµes
        subgraph DungeonMapButtons["BotÃµes"]
            subgraph DungeonMap["ğŸ—ºï¸ Mapa da Dungeon"]
                Rooms["ğŸ“ Salas"]
            end

            EnterRoomButton["â¡ï¸ Entrar na Sala"]
            ExitButton["ğŸ” Abandonar Dungeon"]
            OptionsButton["âš™ï¸ OpÃ§Ãµes"]
            GameLogButton["ğŸ“œ Log do Jogo"]
        end

        %% DecisÃµes
        ExitDungeonChoice{"â“ Abandonar Dungeon?"}

        %% Caminhos
        EnterRoomWindow["ğŸªŸ Janela: <br><a href='#janela-escolha'>Escolha</a>"]
        OptionsWindow["ğŸªŸ Janela: <br><a href='#janela-opÃ§Ãµes'>OpÃ§Ãµes</a>"]
        GameLogWindow["ğŸªŸ Janela: <br><a href='#janela-game-log'>Log do Jogo</a>"]
        MainMenuTransition(("ğŸ”€ TransiÃ§Ã£o:<br><a href='#menu-principal'>Menu Principal</a>"))

        %% Fluxo
        EnterRoomButton --> EnterRoomWindow
        ExitButton --> ExitDungeonChoice

        OptionsButton --> OptionsWindow
        GameLogButton --> GameLogWindow

        ExitDungeonChoice -->|Sim| MainMenuTransition
        ExitDungeonChoice -->|NÃ£o| CancelExitDungeon["Cancelar"]

    ```

</ZoomableDiagram>

#### Sala de Evento

#### Sala de Combate

---

## JANELAS ğŸªŸ

"Janelas" sÃ£o cenas que podem ser acessadas em mais de um lugar do jogo.

### Janela: Gerenciar InventÃ¡rio

### Janela: Escolha

<ZoomableDiagram>

    ```mermaid
    flowchart TD
        subgraph ChoiceWindow["Escolha"]
            NoButton["NÃ£o"]
            YesButton["Sim"]
        end

        YesButton --> Exit["Confirma aÃ§Ã£o"]
        NoButton --> Cancel["Cancela AÃ§Ã£o"]
    ```

</ZoomableDiagram>

### Janela: OpÃ§Ãµes

### Janela: Salvar Jogo

### Janela: Carregar Jogo
